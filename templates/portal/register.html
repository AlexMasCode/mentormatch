<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>Реєстрація</title>
</head>
<body>
    <h2>Реєстрація</h2>
    {% if form.non_field_errors %}
      <ul style="color:red;">
        {% for err in form.non_field_errors %}<li>{{ err }}</li>{% endfor %}
      </ul>
    {% endif %}
    <form method="post" id="reg-form">
      {% csrf_token %}
      {{ form.first_name.label }}<br>{{ form.first_name }}<br><br>
      {{ form.last_name.label }}<br>{{ form.last_name }}<br><br>
      {{ form.email.label }}<br>{{ form.email }}<br><br>
      {{ form.password.label }}<br>{{ form.password }}<br><br>

      {{ form.role.label }}<br>{{ form.role }}<br><br>

      <div id="mentor-fields" style="display:none;">
        {{ form.company_id.label }}<br>{{ form.company_id }}<br><br>
        {{ form.access_key.label }}<br>{{ form.access_key }}<br><br>
      </div>

      <button type="submit">Зареєструватися</button>
    </form>

    <p>Вже маєте акаунт? <a href="{% url 'portal:login' %}">Увійти</a></p>

    <script>
      const roleSelect = document.getElementById('id_role');
      const mentorFields = document.getElementById('mentor-fields');

      function toggleMentor() {
        mentorFields.style.display = (roleSelect.value === 'MENTOR') ? 'block' : 'none';
      }
      roleSelect.addEventListener('change', toggleMentor);
      window.addEventListener('DOMContentLoaded', toggleMentor);
    </script>
</body>
</html>
